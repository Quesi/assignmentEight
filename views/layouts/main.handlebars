<!doctype html>
<html>
<head>
    <title>Todo List</title>
    <link rel="stylesheet" href="/css/style.css"/>
</head>
<body>
<main>
    {{{body}}}
</main>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {

        $(document).on("submit", "form", function (e) {
            e.preventDefault();
            return false;
        });

        // Initial loading of tasks
        for (var i = 0; i < localStorage.length; i++) {
            $("#tasks").append("<li id='task-" + i + "'>" + localStorage.getItem('task-' + i) +
                    "</li>");

            //<a href='#'>Delete</a>
        }

      //   Add a task
        $("form").submit(function (e) {
            e.preventDefault();
            e.stopImmediatePropagation();
            if ($("#task").val() != "") {
                localStorage.setItem("task-" + i, $("#task").val());
                $("#tasks").append("<li id='task-" + i + "'>" + localStorage.getItem("task-" + i) +
                        " </li>");
                $("#task").val("");
                i++;
                //<a href='#'>Delete</a>
            }
            return false;
        });

        // Remove a task

//        $("#tasks li a").live("click", function () {
//            localStorage.removeItem($(this).parent().attr("id"));
//            $(this).parent().hide();
//            for (var i = 0; i < localStorage.length; i++) {
//                if (!localStorage.getItem("task-" + i)) {
//                    localStorage.setItem("task-" + i, localStorage.getItem('task-' + (i + 1)));
//                    localStorage.removeItem('task-' + (i + 1));
//                }
//            }
//        })

    });

</script>
</body>
</html>